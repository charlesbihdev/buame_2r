import{r as d,j as t,L as w,$ as u,S as N}from"./app-BtbECjBp.js";import{C as A}from"./ConfirmDialog-cQlKIJ59.js";import{D as C}from"./DataTable-D4NvELtF.js";import{F as P}from"./FilterBar-Cj2yHY8X.js";import{S as x}from"./StatusBadge-CnfFWRq2.js";import{B as i}from"./button-BC7-Geg8.js";import{A as S}from"./admin-layout-Bq9eecPU.js";import{P as f}from"./package-B1ykCRll.js";import{E as D}from"./eye-Dcn3pJ4C.js";import{C as L}from"./check-B2l6Ffii.js";import{X as _}from"./x-DM8rXS16.js";import{P as F}from"./power-DKQXW4NB.js";import"./dialog-DFPBfhEG.js";import"./index-NJvaBQjn.js";import"./index-BINGtKPA.js";import"./index-CERZ5Dfp.js";import"./Combination-BZikcahQ.js";import"./index-DFOE6_Xr.js";import"./index-BL5RIQ4C.js";import"./createLucideIcon-DB30Qaq5.js";import"./chevron-left-DuAlWl5D.js";import"./chevron-right-WRgfGH91.js";import"./input-DLXOpKi2.js";import"./select-DD0iMEfU.js";import"./index-B1-kl0X3.js";import"./index-zSql8Hbj.js";import"./index-CeY1joyi.js";import"./chevron-down-Bhz_OZSr.js";import"./chevron-up-DwhZLT0u.js";import"./search-BZSbsw3z.js";import"./app-logo-Bk6sqL4T.js";import"./toast-provider-DVP6TESb.js";import"./log-out-CS_e1MNL.js";import"./users-CAiaIoh5.js";import"./star-EB1YuYsX.js";import"./credit-card-DJoZxSEN.js";import"./shield-DfycVQkH.js";import"./message-square-DC3I6uKy.js";import"./menu-Bsvz0MI0.js";function he({products:l,filters:g,productCategories:c}){const[r,s]=d.useState({open:!1,product:null,action:null}),[v,m]=d.useState(!1),h=e=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(e||0),n=(e,a)=>{s({open:!0,product:e,action:a})},j=()=>{if(!r.product||!r.action)return;m(!0);let e;switch(r.action){case"approve":e="admin.marketplace.approve";break;case"reject":e="admin.marketplace.reject";break;case"toggle":e="admin.marketplace.toggle-active";break}N.post(route(e,r.product.id),{},{preserveScroll:!0,onFinish:()=>{m(!1),s({open:!1,product:null,action:null})}})},y=()=>{if(!r.product||!r.action)return{};switch(r.action){case"approve":return{title:"Approve Product",description:`Are you sure you want to approve "${r.product.title}"? It will be visible to all users.`,confirmLabel:"Approve",variant:"default"};case"reject":return{title:"Reject Product",description:`Are you sure you want to reject "${r.product.title}"? It will be hidden from users.`,confirmLabel:"Reject",variant:"destructive"};case"toggle":const e=r.product.is_active;return{title:e?"Deactivate Product":"Activate Product",description:e?`Are you sure you want to deactivate "${r.product.title}"?`:`Are you sure you want to activate "${r.product.title}"?`,confirmLabel:e?"Deactivate":"Activate",variant:e?"destructive":"default"};default:return{}}},b=[{key:"product",label:"Product",render:e=>{var a;return t.jsxs("div",{className:"flex items-center gap-3",children:[(a=e.images)!=null&&a[0]?t.jsx("img",{src:`/storage/${e.images[0].image_path}`,alt:e.title,className:"h-12 w-12 rounded-lg object-cover"}):t.jsx("div",{className:"bg-muted flex h-12 w-12 items-center justify-center rounded-lg",children:t.jsx(f,{className:"text-muted-foreground h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground max-w-[200px] truncate font-medium",children:e.title}),t.jsx("p",{className:"text-muted-foreground text-xs capitalize",children:c[e.category]||e.category})]})]})}},{key:"seller",label:"Seller",render:e=>{var a,p;return t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground text-sm",children:(a=e.user)==null?void 0:a.name}),t.jsx("p",{className:"text-muted-foreground text-xs",children:((p=e.store)==null?void 0:p.name)||"No store"})]})}},{key:"price",label:"Price",render:e=>t.jsx("span",{className:"text-foreground font-medium",children:h(e.price)})},{key:"status",label:"Approval",render:e=>t.jsx(x,{status:e.is_approved,type:"approval"})},{key:"active",label:"Active",render:e=>t.jsx(x,{status:e.is_active,type:"user"})},{key:"created_at",label:"Created",render:e=>t.jsx("span",{className:"text-muted-foreground text-sm",children:new Date(e.created_at).toLocaleDateString()})},{key:"actions",label:"Actions",render:e=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(u,{href:route("admin.marketplace.show",e.id),children:t.jsx(i,{variant:"ghost",size:"sm",children:t.jsx(D,{className:"h-4 w-4"})})}),!e.is_approved&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"approve"),children:t.jsx(L,{className:"h-4 w-4 text-green-500"})}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"reject"),children:t.jsx(_,{className:"text-destructive h-4 w-4"})})]}),e.is_approved&&t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"toggle"),children:t.jsx(F,{className:`h-4 w-4 ${e.is_active?"text-green-500":"text-muted-foreground"}`})})]})}],k=[{key:"status",label:"Status",placeholder:"Filter by status",options:[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"category",label:"Category",placeholder:"Filter by category",options:Object.entries(c).map(([e,a])=>({value:e,label:a}))}],o=y();return t.jsxs(S,{children:[t.jsx(w,{title:"Marketplace Moderation"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Marketplace Moderation"}),t.jsx("p",{className:"text-muted-foreground",children:"Review and manage marketplace products"})]}),t.jsx(u,{href:route("admin.marketplace.pending"),children:t.jsx(i,{children:"View Pending Only"})})]}),t.jsx(P,{filters:k,searchPlaceholder:"Search by product title or seller...",currentFilters:g}),t.jsx(C,{columns:b,data:l.data,pagination:l,emptyMessage:"No products found",emptyIcon:f})]}),t.jsx(A,{open:r.open,onOpenChange:e=>s({...r,open:e}),title:o.title,description:o.description,confirmLabel:o.confirmLabel,variant:o.variant,onConfirm:j,loading:v})]})}export{he as default};
