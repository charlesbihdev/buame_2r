import{r as d,j as t,L as w,$ as u,S as N}from"./app-D4AAjHns.js";import{C as A}from"./ConfirmDialog-yYxoZTQR.js";import{D as C}from"./DataTable-DHTAOLfE.js";import{F as P}from"./FilterBar-BVV6hzMR.js";import{S as x}from"./StatusBadge-DbFEgSVi.js";import{B as i}from"./button-CCQ3ElmT.js";import{A as S}from"./admin-layout-Csk7f8e7.js";import{P as f}from"./package-CJQOeYue.js";import{E as D}from"./eye-BG2VdOQg.js";import{C as L}from"./check-CwlfJiGi.js";import{X as _}from"./x-CKQroxCd.js";import{P as F}from"./power-D309QeoS.js";import"./dialog-BDoe8oN2.js";import"./index-ChzsJTj8.js";import"./index-Bp7b5YSI.js";import"./index-DDYVUezt.js";import"./Combination-CVjrG2Pb.js";import"./index-Dlusv-wU.js";import"./index-YsCxIo0x.js";import"./createLucideIcon-BdiJ_jX_.js";import"./chevron-left-Abwmoka6.js";import"./chevron-right-Cd0EFvJE.js";import"./input-B2wSQVQt.js";import"./select-D7Cc0jXq.js";import"./index-DpXJykB1.js";import"./index-r61TDBAf.js";import"./index-Ck7Gwmkb.js";import"./chevron-down-BEylcunE.js";import"./search-6QcjAKLG.js";import"./app-logo-gXuJdW3W.js";import"./toast-provider-Ck-1ze-A.js";import"./users-Croo8V1Y.js";import"./star-BTObgDq8.js";import"./credit-card-CdZFXB_7.js";import"./shield-Ca_Najg6.js";import"./message-square-D-gKsupx.js";import"./log-out-Ca4RbxG9.js";import"./menu-CVKkBnPr.js";function ve({products:l,filters:g,productCategories:c}){const[r,o]=d.useState({open:!1,product:null,action:null}),[v,m]=d.useState(!1),h=e=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(e||0),n=(e,a)=>{o({open:!0,product:e,action:a})},j=()=>{if(!r.product||!r.action)return;m(!0);let e;switch(r.action){case"approve":e="admin.marketplace.approve";break;case"reject":e="admin.marketplace.reject";break;case"toggle":e="admin.marketplace.toggle-active";break}N.post(route(e,r.product.id),{},{preserveScroll:!0,onFinish:()=>{m(!1),o({open:!1,product:null,action:null})}})},y=()=>{if(!r.product||!r.action)return{};switch(r.action){case"approve":return{title:"Approve Product",description:`Are you sure you want to approve "${r.product.title}"? It will be visible to all users.`,confirmLabel:"Approve",variant:"default"};case"reject":return{title:"Reject Product",description:`Are you sure you want to reject "${r.product.title}"? It will be hidden from users.`,confirmLabel:"Reject",variant:"destructive"};case"toggle":const e=r.product.is_active;return{title:e?"Deactivate Product":"Activate Product",description:e?`Are you sure you want to deactivate "${r.product.title}"?`:`Are you sure you want to activate "${r.product.title}"?`,confirmLabel:e?"Deactivate":"Activate",variant:e?"destructive":"default"};default:return{}}},b=[{key:"product",label:"Product",render:e=>{var a;return t.jsxs("div",{className:"flex items-center gap-3",children:[(a=e.images)!=null&&a[0]?t.jsx("img",{src:`/storage/${e.images[0].image_path}`,alt:e.title,className:"h-12 w-12 rounded-lg object-cover"}):t.jsx("div",{className:"bg-muted flex h-12 w-12 items-center justify-center rounded-lg",children:t.jsx(f,{className:"text-muted-foreground h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground max-w-[200px] truncate font-medium",children:e.title}),t.jsx("p",{className:"text-muted-foreground text-xs capitalize",children:c[e.category]||e.category})]})]})}},{key:"seller",label:"Seller",render:e=>{var a,p;return t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground text-sm",children:(a=e.user)==null?void 0:a.name}),t.jsx("p",{className:"text-muted-foreground text-xs",children:((p=e.store)==null?void 0:p.name)||"No store"})]})}},{key:"price",label:"Price",render:e=>t.jsx("span",{className:"text-foreground font-medium",children:h(e.price)})},{key:"status",label:"Approval",render:e=>t.jsx(x,{status:e.is_approved,type:"approval"})},{key:"active",label:"Active",render:e=>t.jsx(x,{status:e.is_active,type:"user"})},{key:"created_at",label:"Created",render:e=>t.jsx("span",{className:"text-muted-foreground text-sm",children:new Date(e.created_at).toLocaleDateString()})},{key:"actions",label:"Actions",render:e=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(u,{href:route("admin.marketplace.show",e.id),children:t.jsx(i,{variant:"ghost",size:"sm",children:t.jsx(D,{className:"h-4 w-4"})})}),!e.is_approved&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"approve"),children:t.jsx(L,{className:"h-4 w-4 text-green-500"})}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"reject"),children:t.jsx(_,{className:"text-destructive h-4 w-4"})})]}),e.is_approved&&t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"toggle"),children:t.jsx(F,{className:`h-4 w-4 ${e.is_active?"text-green-500":"text-muted-foreground"}`})})]})}],k=[{key:"status",label:"Status",placeholder:"Filter by status",options:[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"category",label:"Category",placeholder:"Filter by category",options:Object.entries(c).map(([e,a])=>({value:e,label:a}))}],s=y();return t.jsxs(S,{children:[t.jsx(w,{title:"Marketplace Moderation"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Marketplace Moderation"}),t.jsx("p",{className:"text-muted-foreground",children:"Review and manage marketplace products"})]}),t.jsx(u,{href:route("admin.marketplace.pending"),children:t.jsx(i,{children:"View Pending Only"})})]}),t.jsx(P,{filters:k,searchPlaceholder:"Search by product title or seller...",currentFilters:g}),t.jsx(C,{columns:b,data:l.data,pagination:l,emptyMessage:"No products found",emptyIcon:f})]}),t.jsx(A,{open:r.open,onOpenChange:e=>o({...r,open:e}),title:s.title,description:s.description,confirmLabel:s.confirmLabel,variant:s.variant,onConfirm:j,loading:v})]})}export{ve as default};
