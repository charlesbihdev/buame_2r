import{r as d,j as t,L as w,$ as u,S as N}from"./app-DGGP786R.js";import{C as A}from"./ConfirmDialog-DeZGaD7K.js";import{D as C}from"./DataTable-CFUN21Tc.js";import{F as P}from"./FilterBar-B3331xH9.js";import{S as x}from"./StatusBadge-Pi7DiTwu.js";import{B as i}from"./button-CB52V1P6.js";import{A as S}from"./admin-layout-Z2P2yfVv.js";import{P as f}from"./package-BiRifxy-.js";import{E as D}from"./eye-BDNwJH8i.js";import{C as L}from"./check-B6BQ0XLV.js";import{X as _}from"./x-BA4tSV2m.js";import{P as F}from"./power-BuYsw4j8.js";import"./dialog-DgT0ekS6.js";import"./index-DDs5vaBP.js";import"./index-CO82IGUN.js";import"./index-BeaeNbCZ.js";import"./Combination-CQRs94NS.js";import"./index-CviULShR.js";import"./index-BaCO-Dy5.js";import"./createLucideIcon-CrOJIGfD.js";import"./chevron-left-CHlMLe5l.js";import"./chevron-right-CKao-hsb.js";import"./input-C17b-tyy.js";import"./select-CWsONBK7.js";import"./index-CRhkxtQG.js";import"./index-BI2yyXft.js";import"./index-C3LqFmQg.js";import"./chevron-down-BsH7ab4d.js";import"./chevron-up-zUKxtjv0.js";import"./search-CkFwfigB.js";import"./app-logo-Da21FpHM.js";import"./toast-provider-5aZk412u.js";import"./log-out-DO5j8X_a.js";import"./users-3f--wukl.js";import"./star-CKAI9Fh5.js";import"./credit-card-C5wsEKrg.js";import"./shield-SQDx6rnU.js";import"./message-square-BwNVuZts.js";import"./menu-DWdoGcf3.js";function he({products:l,filters:g,productCategories:c}){const[r,s]=d.useState({open:!1,product:null,action:null}),[v,m]=d.useState(!1),h=e=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(e||0),n=(e,a)=>{s({open:!0,product:e,action:a})},j=()=>{if(!r.product||!r.action)return;m(!0);let e;switch(r.action){case"approve":e="admin.marketplace.approve";break;case"reject":e="admin.marketplace.reject";break;case"toggle":e="admin.marketplace.toggle-active";break}N.post(route(e,r.product.id),{},{preserveScroll:!0,onFinish:()=>{m(!1),s({open:!1,product:null,action:null})}})},y=()=>{if(!r.product||!r.action)return{};switch(r.action){case"approve":return{title:"Approve Product",description:`Are you sure you want to approve "${r.product.title}"? It will be visible to all users.`,confirmLabel:"Approve",variant:"default"};case"reject":return{title:"Reject Product",description:`Are you sure you want to reject "${r.product.title}"? It will be hidden from users.`,confirmLabel:"Reject",variant:"destructive"};case"toggle":const e=r.product.is_active;return{title:e?"Deactivate Product":"Activate Product",description:e?`Are you sure you want to deactivate "${r.product.title}"?`:`Are you sure you want to activate "${r.product.title}"?`,confirmLabel:e?"Deactivate":"Activate",variant:e?"destructive":"default"};default:return{}}},b=[{key:"product",label:"Product",render:e=>{var a;return t.jsxs("div",{className:"flex items-center gap-3",children:[(a=e.images)!=null&&a[0]?t.jsx("img",{src:`/storage/${e.images[0].image_path}`,alt:e.title,className:"h-12 w-12 rounded-lg object-cover"}):t.jsx("div",{className:"bg-muted flex h-12 w-12 items-center justify-center rounded-lg",children:t.jsx(f,{className:"text-muted-foreground h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground max-w-[200px] truncate font-medium",children:e.title}),t.jsx("p",{className:"text-muted-foreground text-xs capitalize",children:c[e.category]||e.category})]})]})}},{key:"seller",label:"Seller",render:e=>{var a,p;return t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground text-sm",children:(a=e.user)==null?void 0:a.name}),t.jsx("p",{className:"text-muted-foreground text-xs",children:((p=e.store)==null?void 0:p.name)||"No store"})]})}},{key:"price",label:"Price",render:e=>t.jsx("span",{className:"text-foreground font-medium",children:h(e.price)})},{key:"status",label:"Approval",render:e=>t.jsx(x,{status:e.is_approved,type:"approval"})},{key:"active",label:"Active",render:e=>t.jsx(x,{status:e.is_active,type:"user"})},{key:"created_at",label:"Created",render:e=>t.jsx("span",{className:"text-muted-foreground text-sm",children:new Date(e.created_at).toLocaleDateString()})},{key:"actions",label:"Actions",render:e=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(u,{href:route("admin.marketplace.show",e.id),children:t.jsx(i,{variant:"ghost",size:"sm",children:t.jsx(D,{className:"h-4 w-4"})})}),!e.is_approved&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"approve"),children:t.jsx(L,{className:"h-4 w-4 text-green-500"})}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"reject"),children:t.jsx(_,{className:"text-destructive h-4 w-4"})})]}),e.is_approved&&t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"toggle"),children:t.jsx(F,{className:`h-4 w-4 ${e.is_active?"text-green-500":"text-muted-foreground"}`})})]})}],k=[{key:"status",label:"Status",placeholder:"Filter by status",options:[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"category",label:"Category",placeholder:"Filter by category",options:Object.entries(c).map(([e,a])=>({value:e,label:a}))}],o=y();return t.jsxs(S,{children:[t.jsx(w,{title:"Marketplace Moderation"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Marketplace Moderation"}),t.jsx("p",{className:"text-muted-foreground",children:"Review and manage marketplace products"})]}),t.jsx(u,{href:route("admin.marketplace.pending"),children:t.jsx(i,{children:"View Pending Only"})})]}),t.jsx(P,{filters:k,searchPlaceholder:"Search by product title or seller...",currentFilters:g}),t.jsx(C,{columns:b,data:l.data,pagination:l,emptyMessage:"No products found",emptyIcon:f})]}),t.jsx(A,{open:r.open,onOpenChange:e=>s({...r,open:e}),title:o.title,description:o.description,confirmLabel:o.confirmLabel,variant:o.variant,onConfirm:j,loading:v})]})}export{he as default};
