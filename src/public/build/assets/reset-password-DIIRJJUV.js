import{r,m as P,j as e,L as E,S as _}from"./app-Dfu8nYJX.js";import{B as F}from"./button-CuPoYN4Z.js";import{I as i}from"./input-BSSX5X2C.js";import{S as I}from"./shield-Db41X4Uc.js";import{L as f}from"./lock-Cnyy_-hx.js";import{E as w}from"./eye-off-DfvwGBI1.js";import{E as b}from"./eye-CmgUcHjh.js";import"./createLucideIcon-DS1hb5_i.js";function W({phone:m,status:x}){const[n,g]=r.useState(!1),[d,j]=r.useState(!1),[v,h]=r.useState(120),[p,u]=r.useState(!1),{data:o,setData:l,post:N,processing:c,errors:t}=P({phone:m,code:"",password:"",password_confirmation:""});r.useEffect(()=>{const s=setInterval(()=>{h(a=>a<=1?(u(!0),clearInterval(s),0):a-1)},1e3);return()=>clearInterval(s)},[]);const y=s=>{s.preventDefault(),N(route("user.password.update"))},k=()=>{p&&_.post(route("user.password.resend"),{},{preserveScroll:!0,onSuccess:()=>{h(120),u(!1)}})},C=s=>{const a=s.target.value.replace(/\D/g,"").slice(0,6);l("code",a)},S=s=>{const a=Math.floor(s/60),R=s%60;return`${a}:${R.toString().padStart(2,"0")}`};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Reset Password"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f6f8f6] px-4 py-12 dark:bg-[var(--buame-background-dark)]",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[var(--primary)]/10",children:e.jsx(I,{className:"h-8 w-8 text-[var(--primary)]"})}),e.jsx("h1",{className:"text-3xl font-bold text-[var(--foreground)] dark:text-white",children:"Reset Password"}),e.jsxs("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:["We sent a code to ",e.jsx("span",{className:"font-semibold",children:m})]})]}),e.jsxs("div",{className:"rounded-2xl border border-[var(--buame-border-light)] bg-white p-8 shadow-sm dark:border-gray-800 dark:bg-gray-900",children:[x&&e.jsx("div",{className:"mb-4 rounded-lg bg-[var(--primary)]/10 p-3 text-sm font-medium text-[var(--primary)]",children:x}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"mb-2 block text-sm font-semibold text-[var(--foreground)] dark:text-white",children:"Verification Code"}),e.jsx(i,{id:"code",type:"text",inputMode:"numeric",value:o.code,onChange:C,placeholder:"Enter 6-digit code",className:"h-14 text-center text-2xl font-bold tracking-widest",maxLength:6,autoFocus:!0}),t.code&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.code})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-semibold text-[var(--foreground)] dark:text-white",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx(i,{id:"password",type:n?"text":"password",value:o.password,onChange:s=>l("password",s.target.value),placeholder:"Enter new password",className:"h-12 pl-11 pr-11 text-base"}),e.jsx("button",{type:"button",onClick:()=>g(!n),className:"absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(w,{className:"h-5 w-5"}):e.jsx(b,{className:"h-5 w-5"})})]}),t.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password_confirmation",className:"mb-2 block text-sm font-semibold text-[var(--foreground)] dark:text-white",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx(i,{id:"password_confirmation",type:d?"text":"password",value:o.password_confirmation,onChange:s=>l("password_confirmation",s.target.value),placeholder:"Confirm new password",className:"h-12 pl-11 pr-11 text-base"}),e.jsx("button",{type:"button",onClick:()=>j(!d),className:"absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?e.jsx(w,{className:"h-5 w-5"}):e.jsx(b,{className:"h-5 w-5"})})]}),t.password_confirmation&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.password_confirmation})]}),e.jsx(F,{type:"submit",disabled:c||o.code.length!==6,className:"h-12 w-full bg-[var(--primary)] text-base font-bold text-white hover:bg-[#0eb50e]",children:c?"Resetting...":"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:p?e.jsx("button",{onClick:k,disabled:c,className:"text-sm font-semibold text-[var(--primary)] hover:underline disabled:opacity-50",children:"Resend Code"}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Resend code in ",e.jsx("span",{className:"font-semibold",children:S(v)})]})})]})]})})]})}export{W as default};
