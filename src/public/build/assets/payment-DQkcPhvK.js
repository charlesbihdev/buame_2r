import{r as y,m as w,j as e,L as C,$ as S,S as P}from"./app-CdnqJ2Vp.js";import{B}from"./button-B8fboJDH.js";import{B as _}from"./BillingCycleSelector-DVrAe5Tk.js";import{C as F}from"./circle-check-big-CrcGip40.js";import{C as $}from"./credit-card-tC6h-wez.js";import{C as H}from"./check-DndpnqR9.js";import"./createLucideIcon-DesaGi6I.js";const L={artisans:"Artisans",hotels:"Hotel",transport:"Okada",rentals:"Rentals",marketplace:"Marketplace",jobs:"Jobs"};function z({category:a,amount:l,categories:o,user:D,tiers:s,selectedTier:m,categoryConfig:c}){const[d,u]=y.useState(m||"starter"),[n,j]=y.useState("monthly"),{setData:b,processing:h,errors:x}=w({category:a,tier:a==="marketplace"?m||"starter":void 0,billing_cycle:"monthly"}),f=r=>{u(r),b("tier",r)},v=r=>{j(r),b("billing_cycle",r)},N=r=>{r.preventDefault();const i={category:a,billing_cycle:n};a==="marketplace"&&(i.tier=d||"starter"),P.post(route("user.register.payment"),i,{onError:k=>{console.error("Payment submission errors:",k)}})},g=(()=>{var r;return a==="marketplace"&&s&&((r=s[d])!=null&&r.pricing)?s[d].pricing:c!=null&&c.pricing?c.pricing:{monthly:l,biannually:l*5.4,annual:l*9.6}})(),t=g[n]||l,p=()=>{switch(n){case"biannually":return"6 months";case"annual":return"12 months";default:return"1 month"}};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Payment"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f6f8f6] px-4 py-12 dark:bg-[var(--buame-background-dark)]",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-[var(--foreground)] dark:text-white",children:"Complete Payment"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You're almost there! Complete payment to activate your account."})]}),e.jsxs("div",{className:"rounded-2xl border border-[var(--buame-border-light)] bg-white p-8 shadow-sm dark:border-gray-800 dark:bg-gray-900",children:[o&&o.length>1&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("p",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Want to switch category?"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(r=>e.jsx(S,{href:route("user.register",{category:r.value}),className:`rounded-full px-4 py-2 text-sm font-medium transition-colors ${r.value===a?"bg-[var(--primary)] text-white":"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}`,children:r.label},r.value))})]}),a==="marketplace"&&s&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)] dark:text-white",children:"Select Your Store Plan"}),e.jsx("div",{className:"space-y-3",children:Object.entries(s).map(([r,i])=>e.jsx("button",{type:"button",onClick:()=>f(r),className:`w-full rounded-lg border-2 p-4 text-left transition-all ${d===r?"border-[var(--primary)] bg-[var(--primary)]/10":"border-gray-200 bg-white hover:border-[var(--primary)]/50 dark:border-gray-700 dark:bg-[var(--card)]"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-[var(--foreground)] dark:text-white",children:i.name}),d===r&&e.jsx(F,{className:"h-5 w-5 text-[var(--primary)]"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:i.description}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Up to ",i.product_limit," products"]})]})})},r))})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:e.jsx(_,{selected:n,onChange:v,pricing:g})}),e.jsxs("div",{className:"mb-8 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)] dark:text-white",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:L[a]})]}),a==="marketplace"&&s&&s[d]&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plan"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:s[d].name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Billing Cycle"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white capitalize",children:n})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subscription Fee"}),e.jsxs("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:["GH₵ ",(t==null?void 0:t.toFixed(2))||l]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-[var(--foreground)] dark:text-white",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-bold text-[var(--primary)]",children:["GH₵ ",(t==null?void 0:t.toFixed(2))||l]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["/ ",p()]})]})]})})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-semibold text-[var(--foreground)] dark:text-white",children:"Payment Method"}),e.jsx("div",{className:"rounded-lg border-2 border-[var(--primary)] bg-[var(--primary)]/10 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-[var(--primary)] text-white",children:e.jsx($,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:"Paystack"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Secure payment via card, bank transfer, or mobile money"})]}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-[var(--primary)]",children:e.jsx(H,{className:"h-3 w-3 text-white"})})]})}),x.payment&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:x.payment}),x.billing_cycle&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:x.billing_cycle})]}),e.jsx(B,{type:"submit",disabled:h,className:"h-12 w-full bg-[var(--primary)] text-base font-bold text-white hover:bg-[#0eb50e] disabled:opacity-50",children:h?"Redirecting to Paystack...":`Pay GH₵ ${(t==null?void 0:t.toFixed(2))||l} with Paystack`})]}),e.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["Your subscription will be active for ",e.jsx("strong",{children:p()}),". We'll send you reminders before it expires so you can renew on time."]})})]})]})})]})}export{z as default};
