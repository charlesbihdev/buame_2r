import{r as U,j as e,L as V,S as p}from"./app-CXk3mNX-.js";import{D as $}from"./DataTable-CFN9bh_l.js";import{S as d}from"./StatsCard-agAnRbgI.js";import{B as u}from"./button-CsQubiIe.js";import{C as h,a as j,b as g,c as f,d as v}from"./card-CVTo-DHr.js";import{I as w}from"./input-qz-ibqDN.js";import{S,a as C,b as _,c as D,d as m}from"./select-CjwDUVw1.js";import{A as q,C as B}from"./admin-layout-B5Q1f-Q8.js";import{c as A}from"./createLucideIcon--pz34LtR.js";import{T as G}from"./trending-up-Cqt7l_7B.js";import{C as O}from"./calendar-BK573WP_.js";import"./chevron-left-D1JQz_fO.js";import"./chevron-right-C0LViMQF.js";import"./index-Ciwv7gjO.js";import"./index-Z_m_YEK-.js";import"./index-B7kh8nrV.js";import"./Combination-DpFNale2.js";import"./index-fhv2HbDx.js";import"./index-Cl7DJ2-6.js";import"./index-BRLFlWNW.js";import"./chevron-down-dYGqL916.js";import"./check-Dy0PirfO.js";import"./app-logo-xcBZdjT2.js";import"./toast-provider-zg-QLiuD.js";import"./x-C4HrDuJO.js";import"./users-CEP0zxHA.js";import"./package-B3J1kEZE.js";import"./star-BG10g08H.js";import"./credit-card-B6LvTQWb.js";import"./shield-36M6EOkn.js";import"./message-square-OhzhyR7r.js";import"./log-out-CQXhEQds.js";import"./menu-DflnmokY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],T=A("DollarSign",P);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],J=A("Download",W);function Te({payments:y,stats:i,byCategory:s,byBillingCycle:c,monthlyTrend:K,filters:a,categories:F,billingCycles:R}){const[o,x]=U.useState({from:a.from||"",to:a.to||""}),l=r=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(r||0),z=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",N=(r,t)=>{const n={...a,[r]:t==="all"?"":t};Object.keys(n).forEach(k=>{n[k]||delete n[k]}),p.get(route("admin.revenue.index"),n,{preserveState:!0,preserveScroll:!0})},H=()=>{const r={...a,...o};Object.keys(r).forEach(t=>{r[t]||delete r[t]}),p.get(route("admin.revenue.index"),r,{preserveState:!0,preserveScroll:!0})},I=()=>{const r=new URLSearchParams(a);window.location.href=route("admin.revenue.export")+"?"+r.toString()},E=()=>{x({from:"",to:""}),p.get(route("admin.revenue.index"),{},{preserveState:!0})},L=[{key:"user",label:"User",render:r=>{var t,n;return e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:((t=r.user)==null?void 0:t.name)||"N/A"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:((n=r.user)==null?void 0:n.phone)||"N/A"})]})}},{key:"category",label:"Category",render:r=>e.jsx("span",{className:"text-foreground capitalize",children:r.category})},{key:"billing_cycle",label:"Billing",render:r=>{var t;return e.jsx("span",{className:"text-foreground capitalize",children:(t=r.billing_cycle)==null?void 0:t.replace("_"," ")})}},{key:"amount",label:"Amount",render:r=>e.jsx("span",{className:"text-foreground font-bold",children:l(r.amount)})},{key:"payment_type",label:"Type",render:r=>e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium capitalize ${r.payment_type==="renewal"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:r.payment_type||"initial"})},{key:"paid_at",label:"Date",render:r=>e.jsx("span",{className:"text-muted-foreground text-sm",children:z(r.paid_at)})}],M={artisans:"bg-blue-500",hotels:"bg-purple-500",transport:"bg-green-500",rentals:"bg-yellow-500",marketplace:"bg-pink-500",jobs:"bg-orange-500"},b=(s==null?void 0:s.reduce((r,t)=>r+(t.total||0),0))||0;return e.jsxs(q,{children:[e.jsx(V,{title:"Revenue"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Revenue"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and analyze payment data"})]}),e.jsxs(u,{onClick:I,children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(d,{title:"Total Revenue",value:l(i.total),description:"All time",icon:T}),e.jsx(d,{title:"This Month",value:l(i.this_month),description:"Current month",icon:G}),e.jsx(d,{title:"This Week",value:l(i.this_week),description:"Current week",icon:B}),e.jsx(d,{title:"Today",value:l(i.today),description:"Today's revenue",icon:O})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Revenue by Category"}),e.jsx(f,{children:"Breakdown of revenue per category"})]}),e.jsx(v,{children:(s==null?void 0:s.length)>0?e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-foreground text-sm font-medium capitalize",children:r.category}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-foreground font-medium",children:l(r.total)}),e.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:["(",r.count," payments)"]})]})]}),e.jsx("div",{className:"bg-muted h-2 overflow-hidden rounded-full",children:e.jsx("div",{className:`h-full rounded-full ${M[r.category]||"bg-primary"}`,style:{width:`${b>0?r.total/b*100:0}%`}})})]},r.category))}):e.jsx("p",{className:"text-muted-foreground py-8 text-center",children:"No data available"})})]}),e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Revenue by Billing Cycle"}),e.jsx(f,{children:"Distribution across billing cycles"})]}),e.jsx(v,{children:(c==null?void 0:c.length)>0?e.jsx("div",{className:"grid gap-4",children:c.map(r=>{var t;return e.jsxs("div",{className:"border-border flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium capitalize",children:(t=r.billing_cycle)==null?void 0:t.replace("_"," ")}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[r.count," payments"]})]}),e.jsx("p",{className:"text-foreground text-lg font-bold",children:l(r.total)})]},r.billing_cycle)})}):e.jsx("p",{className:"text-muted-foreground py-8 text-center",children:"No data available"})})]})]}),e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Payment History"}),e.jsx(f,{children:"Filter and browse payment records"})]}),e.jsxs(v,{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap items-end gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground mb-1 block text-sm",children:"Category"}),e.jsxs(S,{value:a.category||"all",onValueChange:r=>N("category",r),children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(_,{placeholder:"All"})}),e.jsxs(D,{children:[e.jsx(m,{value:"all",children:"All Categories"}),F.map(r=>e.jsx(m,{value:r,className:"capitalize",children:r},r))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground mb-1 block text-sm",children:"Billing Cycle"}),e.jsxs(S,{value:a.billing_cycle||"all",onValueChange:r=>N("billing_cycle",r),children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(_,{placeholder:"All"})}),e.jsxs(D,{children:[e.jsx(m,{value:"all",children:"All Cycles"}),R.map(r=>e.jsx(m,{value:r.value,children:r.label},r.value))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground mb-1 block text-sm",children:"From Date"}),e.jsx(w,{type:"date",value:o.from,onChange:r=>x({...o,from:r.target.value}),className:"w-[150px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground mb-1 block text-sm",children:"To Date"}),e.jsx(w,{type:"date",value:o.to,onChange:r=>x({...o,to:r.target.value}),className:"w-[150px]"})]}),e.jsx(u,{onClick:H,children:"Apply"}),e.jsx(u,{variant:"outline",onClick:E,children:"Clear"})]}),e.jsx($,{columns:L,data:y.data,pagination:y,emptyMessage:"No payments found",emptyIcon:T})]})]})]})]})}export{Te as default};
