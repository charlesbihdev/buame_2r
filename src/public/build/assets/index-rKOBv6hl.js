import{r as d,j as t,L as w,$ as u,S as N}from"./app-D3yXsx5J.js";import{C as A}from"./ConfirmDialog-9OiGcl8U.js";import{D as C}from"./DataTable-DtbvByGM.js";import{F as P}from"./FilterBar-DRprN_tT.js";import{S as x}from"./StatusBadge-GE-ELYo1.js";import{B as i}from"./button-B8y-bg39.js";import{A as S}from"./admin-layout-RxXIUBOR.js";import{P as f}from"./package-Baru_Zec.js";import{E as D}from"./eye-BaCfQsFc.js";import{C as L}from"./check-Cwo0rqwV.js";import{X as _}from"./x-CIvU1FFb.js";import{P as F}from"./power-DTq9QjeF.js";import"./dialog-CiiNuM7w.js";import"./index-DS2IGyA7.js";import"./index-DpjfdCQJ.js";import"./index-BS1x-pKO.js";import"./Combination-DqO_qrLo.js";import"./index-qtgx10xL.js";import"./index-B7IdUgQf.js";import"./createLucideIcon-BqiSg0iH.js";import"./chevron-left-Cg-4NT5s.js";import"./chevron-right-CQGhawwy.js";import"./input-Cm1xTScA.js";import"./select-BbjSwu2H.js";import"./index-BPnvg1n7.js";import"./index-BFb9XmIM.js";import"./index-BqKVddn2.js";import"./chevron-down-BO1KSHeR.js";import"./chevron-up-BIRoMh0B.js";import"./search-BiChz7pC.js";import"./app-logo-SwjMCNdG.js";import"./toast-provider-CJpBRxeK.js";import"./users-C63rVBMI.js";import"./star-IoMzUVzy.js";import"./credit-card-CJffvx00.js";import"./shield-CLmaRB2r.js";import"./message-square-CbF4cuo6.js";import"./log-out-Br44zYVe.js";import"./menu-tATcDxS8.js";function he({products:l,filters:g,productCategories:c}){const[r,s]=d.useState({open:!1,product:null,action:null}),[v,m]=d.useState(!1),h=e=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(e||0),n=(e,a)=>{s({open:!0,product:e,action:a})},j=()=>{if(!r.product||!r.action)return;m(!0);let e;switch(r.action){case"approve":e="admin.marketplace.approve";break;case"reject":e="admin.marketplace.reject";break;case"toggle":e="admin.marketplace.toggle-active";break}N.post(route(e,r.product.id),{},{preserveScroll:!0,onFinish:()=>{m(!1),s({open:!1,product:null,action:null})}})},y=()=>{if(!r.product||!r.action)return{};switch(r.action){case"approve":return{title:"Approve Product",description:`Are you sure you want to approve "${r.product.title}"? It will be visible to all users.`,confirmLabel:"Approve",variant:"default"};case"reject":return{title:"Reject Product",description:`Are you sure you want to reject "${r.product.title}"? It will be hidden from users.`,confirmLabel:"Reject",variant:"destructive"};case"toggle":const e=r.product.is_active;return{title:e?"Deactivate Product":"Activate Product",description:e?`Are you sure you want to deactivate "${r.product.title}"?`:`Are you sure you want to activate "${r.product.title}"?`,confirmLabel:e?"Deactivate":"Activate",variant:e?"destructive":"default"};default:return{}}},b=[{key:"product",label:"Product",render:e=>{var a;return t.jsxs("div",{className:"flex items-center gap-3",children:[(a=e.images)!=null&&a[0]?t.jsx("img",{src:`/storage/${e.images[0].image_path}`,alt:e.title,className:"h-12 w-12 rounded-lg object-cover"}):t.jsx("div",{className:"bg-muted flex h-12 w-12 items-center justify-center rounded-lg",children:t.jsx(f,{className:"text-muted-foreground h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground max-w-[200px] truncate font-medium",children:e.title}),t.jsx("p",{className:"text-muted-foreground text-xs capitalize",children:c[e.category]||e.category})]})]})}},{key:"seller",label:"Seller",render:e=>{var a,p;return t.jsxs("div",{children:[t.jsx("p",{className:"text-foreground text-sm",children:(a=e.user)==null?void 0:a.name}),t.jsx("p",{className:"text-muted-foreground text-xs",children:((p=e.store)==null?void 0:p.name)||"No store"})]})}},{key:"price",label:"Price",render:e=>t.jsx("span",{className:"text-foreground font-medium",children:h(e.price)})},{key:"status",label:"Approval",render:e=>t.jsx(x,{status:e.is_approved,type:"approval"})},{key:"active",label:"Active",render:e=>t.jsx(x,{status:e.is_active,type:"user"})},{key:"created_at",label:"Created",render:e=>t.jsx("span",{className:"text-muted-foreground text-sm",children:new Date(e.created_at).toLocaleDateString()})},{key:"actions",label:"Actions",render:e=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(u,{href:route("admin.marketplace.show",e.id),children:t.jsx(i,{variant:"ghost",size:"sm",children:t.jsx(D,{className:"h-4 w-4"})})}),!e.is_approved&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"approve"),children:t.jsx(L,{className:"h-4 w-4 text-green-500"})}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"reject"),children:t.jsx(_,{className:"text-destructive h-4 w-4"})})]}),e.is_approved&&t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>n(e,"toggle"),children:t.jsx(F,{className:`h-4 w-4 ${e.is_active?"text-green-500":"text-muted-foreground"}`})})]})}],k=[{key:"status",label:"Status",placeholder:"Filter by status",options:[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{key:"category",label:"Category",placeholder:"Filter by category",options:Object.entries(c).map(([e,a])=>({value:e,label:a}))}],o=y();return t.jsxs(S,{children:[t.jsx(w,{title:"Marketplace Moderation"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Marketplace Moderation"}),t.jsx("p",{className:"text-muted-foreground",children:"Review and manage marketplace products"})]}),t.jsx(u,{href:route("admin.marketplace.pending"),children:t.jsx(i,{children:"View Pending Only"})})]}),t.jsx(P,{filters:k,searchPlaceholder:"Search by product title or seller...",currentFilters:g}),t.jsx(C,{columns:b,data:l.data,pagination:l,emptyMessage:"No products found",emptyIcon:f})]}),t.jsx(A,{open:r.open,onOpenChange:e=>s({...r,open:e}),title:o.title,description:o.description,confirmLabel:o.confirmLabel,variant:o.variant,onConfirm:j,loading:v})]})}export{he as default};
