import{r as f,m as P,j as e,L as B,$,S as v}from"./app-BTucPwNw.js";import{B as E}from"./button-B9NT0Vqu.js";import{G,B as _}from"./BillingCycleSelector-CXzvpUeH.js";import{C as H}from"./circle-check-big-C5vJLxvQ.js";import{C as L}from"./credit-card-Ddz7SVir.js";import{C as R}from"./check-CA6OypIV.js";import"./createLucideIcon-5saRSsaN.js";const T={artisans:"Artisans",hotels:"Hotel",transport:"Okada",rentals:"Rentals",marketplace:"Marketplace",jobs:"Jobs"};function D({category:a,amount:d,categories:g,user:Y,tiers:l,selectedTier:b,categoryConfig:o,isFreeAccess:t,freeAccessDays:c}){const[i,N]=f.useState(b||"starter"),[x,k]=f.useState("monthly"),{setData:p,processing:y,errors:m}=P({category:a,tier:a==="marketplace"?b||"starter":void 0,billing_cycle:"monthly"}),w=r=>{N(r),p("tier",r)},S=r=>{k(r),p("billing_cycle",r)},C=r=>{r.preventDefault();const n={category:a};a==="marketplace"&&(n.tier=i||"starter"),t?v.post(route("user.register.free-access"),n,{onError:h=>{console.error("Free access errors:",h)}}):(n.billing_cycle=x,v.post(route("user.register.payment"),n,{onError:h=>{console.error("Payment submission errors:",h)}}))},j=(()=>{var r;return a==="marketplace"&&l&&((r=l[i])!=null&&r.pricing)?l[i].pricing:o!=null&&o.pricing?o.pricing:{monthly:d,biannually:d*5.4,annual:d*9.6}})(),s=j[x]||d,u=()=>{switch(x){case"biannually":return"6 months";case"annual":return"12 months";default:return"1 month"}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:t?"Activate Free Access":"Payment"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f6f8f6] px-4 py-12 dark:bg-[var(--buame-background-dark)]",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-[var(--foreground)] dark:text-white",children:t?"Activate Free Access":"Complete Payment"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:t?"Select your category to get started with free access!":"You're almost there! Complete payment to activate your account."})]}),e.jsxs("div",{className:"rounded-2xl border border-[var(--buame-border-light)] bg-white p-8 shadow-sm dark:border-gray-800 dark:bg-gray-900",children:[g&&g.length>0&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("p",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:a?"Want to switch category?":"Select a Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(r=>e.jsx($,{href:route("user.register.payment",{category:r.value}),className:`rounded-full px-4 py-2 text-sm font-medium transition-colors ${r.value===a?"bg-[var(--primary)] text-white":"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}`,children:r.label},r.value))})]}),t&&e.jsx("div",{className:"mb-6 rounded-lg border-2 border-green-500 bg-green-50 p-6 dark:border-green-600 dark:bg-green-900/20",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-500 text-white",children:e.jsx(G,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:"Free Access Period"}),e.jsxs("p",{className:"mt-1 text-green-600 dark:text-green-400",children:["Get ",e.jsxs("strong",{children:[c," days"]})," free access. No payment required!"]}),e.jsx("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:"After your free period ends, you'll receive reminders to subscribe and continue using the platform."})]})]})}),a==="marketplace"&&l&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)] dark:text-white",children:"Select Your Store Plan"}),e.jsx("div",{className:"space-y-3",children:Object.entries(l).map(([r,n])=>e.jsx("button",{type:"button",onClick:()=>w(r),className:`w-full rounded-lg border-2 p-4 text-left transition-all ${i===r?"border-[var(--primary)] bg-[var(--primary)]/10":"border-gray-200 bg-white hover:border-[var(--primary)]/50 dark:border-gray-700 dark:bg-[var(--card)]"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-[var(--foreground)] dark:text-white",children:n.name}),i===r&&e.jsx(H,{className:"h-5 w-5 text-[var(--primary)]"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:n.description}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Up to ",n.product_limit," products"]})]})})},r))})]}),!t&&e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:e.jsx(_,{selected:x,onChange:S,pricing:j})}),e.jsxs("div",{className:"mb-8 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)] dark:text-white",children:t?"Selection Summary":"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:T[a]})]}),a==="marketplace"&&l&&l[i]&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plan"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:l[i].name})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Access Period"}),e.jsxs("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:[c," days"]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-[var(--foreground)] dark:text-white",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:"FREE"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["for ",c," days"]})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Billing Cycle"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] dark:text-white capitalize",children:x})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subscription Fee"}),e.jsxs("span",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:["GH₵ ",(s==null?void 0:s.toFixed(2))||d]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-[var(--foreground)] dark:text-white",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-bold text-[var(--primary)]",children:["GH₵ ",(s==null?void 0:s.toFixed(2))||d]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["/ ",u()]})]})]})})]})]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[!t&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-semibold text-[var(--foreground)] dark:text-white",children:"Payment Method"}),e.jsx("div",{className:"rounded-lg border-2 border-[var(--primary)] bg-[var(--primary)]/10 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-[var(--primary)] text-white",children:e.jsx(L,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-[var(--foreground)] dark:text-white",children:"Paystack"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Secure payment via card, bank transfer, or mobile money"})]}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-[var(--primary)]",children:e.jsx(R,{className:"h-3 w-3 text-white"})})]})})]}),m.payment&&e.jsx("p",{className:"text-sm text-red-600",children:m.payment}),m.billing_cycle&&e.jsx("p",{className:"text-sm text-red-600",children:m.billing_cycle}),e.jsx(E,{type:"submit",disabled:y,className:`h-12 w-full text-base font-bold text-white disabled:opacity-50 ${t?"bg-green-600 hover:bg-green-700":"bg-[var(--primary)] hover:bg-[#0eb50e]"}`,children:y?t?"Activating...":"Redirecting to Paystack...":t?`Activate ${c}-Day Free Access`:`Pay GH₵ ${(s==null?void 0:s.toFixed(2))||d} with Paystack`})]}),e.jsx("div",{className:`mt-6 rounded-lg p-4 ${t?"bg-green-50 dark:bg-green-900/20":"bg-blue-50 dark:bg-blue-900/20"}`,children:e.jsx("p",{className:`text-sm ${t?"text-green-800 dark:text-green-300":"text-blue-800 dark:text-blue-300"}`,children:t?e.jsxs(e.Fragment,{children:["Your free access will be active for ",e.jsxs("strong",{children:[c," days"]}),". We'll send you reminders before it expires so you can subscribe to continue using the platform."]}):e.jsxs(e.Fragment,{children:["Your subscription will be active for ",e.jsx("strong",{children:u()}),". We'll send you reminders before it expires so you can renew on time."]})})})]})]})})]})}export{D as default};
