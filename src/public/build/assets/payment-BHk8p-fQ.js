import{r as y,m as P,j as e,L as B,$,S as v}from"./app-hXs2X1QE.js";import{B as E}from"./button-BpittBfs.js";import{G,B as _}from"./BillingCycleSelector-Di55dGhW.js";import{C as H}from"./circle-check-big-DWuNzaB8.js";import{C as L}from"./credit-card-B5kn7yhk.js";import{C as R}from"./check-Dnxby1PX.js";import"./createLucideIcon-BjZnRbM4.js";const T={artisans:"Artisans",hotels:"Hotel",transport:"Okada",rentals:"Rentals",marketplace:"Marketplace",jobs:"Jobs"};function D({category:t,amount:i,categories:h,user:Y,tiers:l,selectedTier:g,categoryConfig:m,isFreeAccess:r,freeAccessDays:c}){const[d,N]=y.useState(g||"starter"),[o,w]=y.useState("monthly"),{setData:p,processing:j,errors:x}=P({category:t,tier:t==="marketplace"?g||"starter":void 0,billing_cycle:"monthly"}),S=s=>{N(s),p("tier",s)},k=s=>{w(s),p("billing_cycle",s)},C=s=>{s.preventDefault();const n={category:t};t==="marketplace"&&(n.tier=d||"starter"),r?v.post(route("user.register.free-access"),n,{onError:b=>{console.error("Free access errors:",b)}}):(n.billing_cycle=o,v.post(route("user.register.payment"),n,{onError:b=>{console.error("Payment submission errors:",b)}}))},u=(()=>{var s;return t==="marketplace"&&l&&((s=l[d])!=null&&s.pricing)?l[d].pricing:m!=null&&m.pricing?m.pricing:{monthly:i,biannually:i*5.4,annual:i*9.6}})(),a=u[o]||i,f=()=>{switch(o){case"biannually":return"6 months";case"annual":return"12 months";default:return"1 month"}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:r?"Activate Free Access":"Payment"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f6f8f6] px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-[var(--foreground)]",children:r?"Activate Free Access":"Complete Payment"}),e.jsx("p",{className:"mt-2 text-gray-600",children:r?"Select your category to get started with free access!":"You're almost there! Complete payment to activate your account."})]}),e.jsxs("div",{className:"rounded-2xl border border-[var(--buame-border-light)] bg-white p-8 shadow-sm",children:[h&&h.length>0&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("p",{className:"mb-3 text-sm font-semibold text-gray-700",children:t?"Want to switch category?":"Select a Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(s=>e.jsx($,{href:route("user.register.payment",{category:s.value}),className:`rounded-full px-4 py-2 text-sm font-medium transition-colors ${s.value===t?"bg-[var(--primary)] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:s.label},s.value))})]}),r&&e.jsx("div",{className:"mb-6 rounded-lg border-2 border-green-500 bg-green-50 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-500 text-white",children:e.jsx(G,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-700",children:"Free Access Period"}),e.jsxs("p",{className:"mt-1 text-green-600",children:["Get ",e.jsxs("strong",{children:[c," days"]})," free access. No payment required!"]}),e.jsx("p",{className:"mt-2 text-sm text-green-600",children:"After your free period ends, you'll receive reminders to subscribe and continue using the platform."})]})]})}),t==="marketplace"&&l&&e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)]",children:"Select Your Store Plan"}),e.jsx("div",{className:"space-y-3",children:Object.entries(l).map(([s,n])=>e.jsx("button",{type:"button",onClick:()=>S(s),className:`w-full rounded-lg border-2 p-4 text-left transition-all ${d===s?"border-[var(--primary)] bg-[var(--primary)]/10":"border-gray-200 bg-white hover:border-[var(--primary)]/50"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-[var(--foreground)]",children:n.name}),d===s&&e.jsx(H,{className:"h-5 w-5 text-[var(--primary)]"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:n.description}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Up to ",n.product_limit," products"]})]})})},s))})]}),!r&&e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-6",children:e.jsx(_,{selected:o,onChange:k,pricing:u})}),e.jsxs("div",{className:"mb-8 rounded-lg border border-gray-200 bg-gray-50 p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[var(--foreground)]",children:r?"Selection Summary":"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Category"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)]",children:T[t]})]}),t==="marketplace"&&l&&l[d]&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Plan"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)]",children:l[d].name})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Access Period"}),e.jsxs("span",{className:"font-semibold text-[var(--foreground)]",children:[c," days"]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-[var(--foreground)]",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:"FREE"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["for ",c," days"]})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Billing Cycle"}),e.jsx("span",{className:"font-semibold text-[var(--foreground)] capitalize",children:o})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subscription Fee"}),e.jsxs("span",{className:"font-semibold text-[var(--foreground)]",children:["GH₵ ",(a==null?void 0:a.toFixed(2))||i]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-[var(--foreground)]",children:"Total"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-bold text-[var(--primary)]",children:["GH₵ ",(a==null?void 0:a.toFixed(2))||i]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["/ ",f()]})]})]})})]})]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[!r&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-semibold text-[var(--foreground)]",children:"Payment Method"}),e.jsx("div",{className:"rounded-lg border-2 border-[var(--primary)] bg-[var(--primary)]/10 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-[var(--primary)] text-white",children:e.jsx(L,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-[var(--foreground)]",children:"Paystack"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Secure payment via card, bank transfer, or mobile money"})]}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-[var(--primary)]",children:e.jsx(R,{className:"h-3 w-3 text-white"})})]})})]}),x.payment&&e.jsx("p",{className:"text-sm text-red-600",children:x.payment}),x.billing_cycle&&e.jsx("p",{className:"text-sm text-red-600",children:x.billing_cycle}),e.jsx(E,{type:"submit",disabled:j,className:`h-12 w-full text-base font-bold text-white disabled:opacity-50 ${r?"bg-green-600 hover:bg-green-700":"bg-[var(--primary)] hover:bg-[#0eb50e]"}`,children:j?r?"Activating...":"Redirecting to Paystack...":r?`Activate ${c}-Day Free Access`:`Pay GH₵ ${(a==null?void 0:a.toFixed(2))||i} with Paystack`})]}),e.jsx("div",{className:`mt-6 rounded-lg p-4 ${r?"bg-green-50":"bg-blue-50"}`,children:e.jsx("p",{className:`text-sm ${r?"text-green-800":"text-blue-800"}`,children:r?e.jsxs(e.Fragment,{children:["Your free access will be active for ",e.jsxs("strong",{children:[c," days"]}),". We'll send you reminders before it expires so you can subscribe to continue using the platform."]}):e.jsxs(e.Fragment,{children:["Your subscription will be active for ",e.jsx("strong",{children:f()}),". We'll send you reminders before it expires so you can renew on time."]})})})]})]})})]})}export{D as default};
