import{r as v,j as e,L as U,$ as B,S as A}from"./app-hXs2X1QE.js";import{C as D}from"./ConfirmDialog-BdRohy4Q.js";import{S as n}from"./StatusBadge-BHsltHBJ.js";import{B as x}from"./button-BpittBfs.js";import{C as o,a as c,b as l,d,c as p}from"./card-CEb2u8Tx.js";import{A as L}from"./admin-layout-LurSrCYl.js";import{A as P}from"./arrow-left-E-C1nrUr.js";import{B as $}from"./ban-oeXIR35g.js";import{C as H}from"./circle-check-big-DWuNzaB8.js";import{S as I}from"./shield-check-BiAbvPYU.js";import{P as b}from"./package-CiKAGZKX.js";import{B as T}from"./briefcase-D3QxG_BP.js";import{H as z}from"./house-DX9SFfDO.js";import{C as E}from"./car-C-99y9FB.js";import{B as F}from"./building-2-B-7eD1RX.js";import"./dialog-89Coc_8g.js";import"./index-9Tbtx5cT.js";import"./index-DvoQ3VpN.js";import"./index-BAac8l-e.js";import"./Combination-i8lhZRpi.js";import"./index-TADCmT-z.js";import"./index-SpvTtPm7.js";import"./createLucideIcon-BjZnRbM4.js";import"./x-C3JUFJE2.js";import"./app-logo-DFsIJDOW.js";import"./toast-provider-uMKwlbrT.js";import"./log-out-D2q0hPiO.js";import"./users-CO0arM3N.js";import"./star-BfCocXuG.js";import"./credit-card-B5kn7yhk.js";import"./shield-DfpO3Zp6.js";import"./message-square-DJoupEDn.js";import"./menu-C4tVaTfA.js";function ve({user:s}){var f,j,g,N;const[i,m]=v.useState({open:!1,action:null}),[C,u]=v.useState(!1),h=t=>{m({open:!0,action:t})},w=()=>{u(!0);const t=i.action==="block"?"admin.users.toggle-block":"admin.users.verify";A.post(route(t,s.id),{},{preserveScroll:!0,onFinish:()=>{u(!1),m({open:!1,action:null})}})},k=t=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(t||0),r=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",_=t=>{switch(t){case"hotels":return F;case"transport":return E;case"rentals":return z;case"marketplace":return b;case"jobs":return T;default:return b}},a=(()=>{if(i.action==="block"){const t=s.is_active;return{title:t?"Block User":"Unblock User",description:t?`Are you sure you want to block "${s.name}"? They will not be able to access their account.`:`Are you sure you want to unblock "${s.name}"? They will regain access to their account.`,confirmLabel:t?"Block User":"Unblock User",variant:t?"destructive":"default"}}return{title:"Verify User",description:`Are you sure you want to manually verify "${s.name}"? This will mark their phone as verified.`,confirmLabel:"Verify User",variant:"default"}})();return e.jsxs(L,{children:[e.jsx(U,{title:`User: ${s.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{href:route("admin.users.index"),children:e.jsxs(x,{variant:"ghost",size:"sm",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:"User Details"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:s.is_active?"destructive":"default",onClick:()=>h("block"),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Block User"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Unblock User"]})}),!s.phone_verified_at&&e.jsxs(x,{variant:"outline",onClick:()=>h("verify"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Verify Manually"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(o,{className:"lg:col-span-1",children:[e.jsx(c,{children:e.jsx(l,{children:"User Information"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-primary/10 flex h-16 w-16 items-center justify-center rounded-full",children:e.jsx("span",{className:"text-primary text-2xl font-bold",children:(f=s.name)==null?void 0:f.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{status:s.is_active,type:"user"}),e.jsx(n,{status:!!s.phone_verified_at,type:"verification"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Phone"}),e.jsx("p",{className:"text-foreground font-medium",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Email"}),e.jsx("p",{className:"text-foreground font-medium",children:s.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Joined"}),e.jsx("p",{className:"text-foreground font-medium",children:r(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Last Login"}),e.jsx("p",{className:"text-foreground font-medium",children:r(s.last_login_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Phone Verified"}),e.jsx("p",{className:"text-foreground font-medium",children:r(s.phone_verified_at)})]})]})]})]}),e.jsxs(o,{className:"lg:col-span-2",children:[e.jsxs(c,{children:[e.jsx(l,{children:"Subscriptions"}),e.jsx(p,{children:"Active category subscriptions"})]}),e.jsx(d,{children:((j=s.categories)==null?void 0:j.length)>0?e.jsx("div",{className:"space-y-4",children:s.categories.map(t=>{var y;const S=_(t.category);return e.jsxs("div",{className:"border-border flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted flex h-10 w-10 items-center justify-center rounded-lg",children:e.jsx(S,{className:"text-muted-foreground h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium capitalize",children:t.category}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[(y=t.billing_cycle)==null?void 0:y.replace("_"," ")," - Expires: ",r(t.expires_at)]})]})]}),e.jsx(n,{status:t.subscription_status,type:"subscription"})]},t.id)})}):e.jsx("p",{className:"text-muted-foreground py-4 text-center",children:"No subscriptions"})})]})]}),s.store&&e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Store Information"}),e.jsx(p,{children:"Marketplace store details"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Store Name"}),e.jsx("p",{className:"text-foreground font-medium",children:s.store.name||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Tier"}),e.jsx("p",{className:"text-foreground font-medium capitalize",children:s.store.tier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Status"}),e.jsx(n,{status:s.store.is_active,type:"user"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs uppercase",children:"Products"}),e.jsxs("p",{className:"text-foreground font-medium",children:[((g=s.marketplace_products)==null?void 0:g.length)||0," products"]})]})]})})]}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Recent Payments"}),e.jsx(p,{children:"Payment history"})]}),e.jsx(d,{children:((N=s.payments)==null?void 0:N.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-muted-foreground px-4 py-2 text-left text-sm font-medium",children:"Category"}),e.jsx("th",{className:"text-muted-foreground px-4 py-2 text-left text-sm font-medium",children:"Amount"}),e.jsx("th",{className:"text-muted-foreground px-4 py-2 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"text-muted-foreground px-4 py-2 text-left text-sm font-medium",children:"Date"})]})}),e.jsx("tbody",{children:s.payments.map(t=>e.jsxs("tr",{className:"border-border border-t",children:[e.jsx("td",{className:"text-foreground px-4 py-2 text-sm capitalize",children:t.category}),e.jsx("td",{className:"text-foreground px-4 py-2 text-sm",children:k(t.amount)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${t.status==="completed"?"bg-green-100 text-green-700":t.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.status})}),e.jsx("td",{className:"text-muted-foreground px-4 py-2 text-sm",children:r(t.paid_at||t.created_at)})]},t.id))})]})}):e.jsx("p",{className:"text-muted-foreground py-4 text-center",children:"No payment history"})})]})]}),e.jsx(D,{open:i.open,onOpenChange:t=>m({...i,open:t}),title:a.title,description:a.description,confirmLabel:a.confirmLabel,variant:a.variant,onConfirm:w,loading:C})]})}export{ve as default};
